@model List<City>
@{
    ViewData["Title"] = "Index";
}

<h1>Index</h1>

<table class="table table-bordered table-hover">
    <tr>
        <th>ID</th>
        <th>Name </th>
        <th>Shipping Cost</th>
        <th></th>
        <th></th>
    </tr>
    @foreach (var item in Model)
    {
        <tr id="row_@item.Id">
            <td>@item.Id </td>
            <td>@item.Name</td>
            <td>@item.ShippingCost</td>
            <td><a href="/City/Edit/@item.Id">Edit</a></td>
            <td>
                <input type="submit" class="btn btn-danger mb-3" value="Delete" onclick="Delete(@item.Id)" />
            </td>
           
        </tr>
    }
</table>
@section Scripts
    {
    <script src="~/lib/jquery/dist/jquery.js"></script>
    <script>
        function Delete(id) {
            if (confirm(`Are you sure you want delete this item `)) {

                $.ajax({
                    type: "POST",
                    url: `@Url.Action("Delete")`,
                    data: { id: id },
                    dataType: "text",
                    success: function (response) {
                        if (response.trim() == "sucsses") {
                            $("#row_" + id).remove()
                        }
                    },
                    error: function () {
                        alert("Error while deleting data");
                    }
                });
            }
           
        }
    </script>
}